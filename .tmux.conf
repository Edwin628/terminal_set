##### 基础设置 #####

# 使用 Ctrl-a 作为前缀键（更符合 GNU screen 用户习惯）
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# 更快的按键响应
set -sg escape-time 0

# 启用鼠标
set -g mouse on

# 启用 256 色
set -g default-terminal "screen-256color"

# 自动重新命名窗口
set-option -g allow-rename off
setw -g automatic-rename on


##### 分屏操作 #####

# 垂直分屏（Ctrl-a + |）
bind | split-window -h
# 水平分屏（Ctrl-a + -）
bind - split-window -v
unbind '"'
unbind %

# 切换窗格（类似 vim）
bind h select-pane -L
bind l select-pane -R
bind j select-pane -D
bind k select-pane -U
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# 快捷新建 / 关闭 / 重命名窗口
bind c new-window
bind & kill-window
bind , command-prompt "rename-window %%"


##### 状态栏美化 #####

# 状态栏位置与刷新
set -g status-position bottom
set -g status-interval 1
set -g status-justify centre

# 状态栏配色
set -g status-bg colour235
set -g status-fg white

# 左侧显示主机名 + 窗口名
set -g status-left '#[fg=green]#H #[fg=blue]#S'

# 右侧显示时间、日期
set -g status-right '#[fg=yellow]%Y-%m-%d #[fg=cyan]%H:%M:%S'

# 活动窗口高亮
setw -g window-status-current-format '#[fg=brightred]#I:#W#F'

# Git 分支（需插件支持，可选）
# set -g status-right '#(cd #{pane_current_path}; git rev-parse --abbrev-ref HEAD 2>/dev/null)'


##### 插件管理：TPM（tmux plugin manager）#####

# 初始化 TPM 插件管理器
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'   # 保存/恢复会话
set -g @plugin 'tmux-plugins/tmux-continuum'   # 自动保存会话
# set -g @plugin 'tmux-plugins/tmux-battery'   # 显示电池（可选）

# 启用持续保存
set -g @continuum-restore 'on'

# 插件初始化（必须保留）
run '~/.tmux/plugins/tpm/tpm'
